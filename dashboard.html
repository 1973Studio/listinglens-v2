<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Listing Lens — Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;0,9..40,900&display=swap" rel="stylesheet">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --white: #FFFFFF;
  --snow: #F9FAFB;
  --gray-100: #E5E7EB;
  --gray-200: #D1D5DB;
  --slate-900: #0F172A;
  --slate-800: #1E293B;
  --slate-700: #334155;
  --slate-500: #64748B;
  --slate-400: #94A3B8;
  --emerald: #10B981;
  --emerald-light: #6EE7B7;
  --emerald-pale: #D1FAE5;
  --emerald-deep: #059669;
  --emerald-dark: #064E3B;
  --red: #DC2626;
  --red-pale: #FEF2F2;
  --amber: #F59E0B;
  --amber-pale: #FFFBEB;
  --blue-pale: #EFF6FF;
  --font: 'DM Sans', system-ui, -apple-system, sans-serif;
}

html { font-family: var(--font); -webkit-font-smoothing: antialiased; background: var(--snow); color: var(--slate-900); }
body { margin: 0; padding: 1.2rem; min-height: 100vh; }
@media (min-width: 768px) { body { padding: 2rem; } }

/* ============================================================
   BENTO GRID
   ============================================================ */
.bento {
  max-width: 960px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}
@media (min-width: 768px) {
  .bento { grid-template-columns: repeat(4, 1fr); }
}

/* ============================================================
   BASE CARD
   ============================================================ */
.card {
  background: var(--white);
  border-radius: 20px;
  padding: 1.8rem;
  border: 1.5px solid var(--gray-100);
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  opacity: 0;
  animation: fadeUp 0.4s ease forwards;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.06);
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ============================================================
   TOP BAR
   ============================================================ */
.topbar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--slate-900);
  margin: -1.2rem -1.2rem 1.2rem;
  padding: 0 1.2rem;
}
@media (min-width: 768px) {
  .topbar { margin: -2rem -2rem 2rem; padding: 0 2rem; }
}
.topbar-inner {
  max-width: 960px;
  margin: 0 auto;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.topbar-brand {
  color: var(--white);
  font-size: 0.78rem;
  font-weight: 800;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.topbar-brand:hover { color: var(--emerald-light); }
.topbar-back {
  color: var(--slate-400);
  font-size: 0.78rem;
  font-weight: 600;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.3rem;
}
.topbar-back:hover { color: var(--white); }

/* ============================================================
   HEADER CARD — sticky progress
   ============================================================ */
.card--header {
  grid-column: 1 / -1;
  background: var(--slate-900);
  color: var(--white);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 0.6rem;
  padding: 1rem 1.4rem;
  position: sticky;
  top: 48px;
  z-index: 90;
  border-radius: 14px;
  margin-bottom: 0;
}
.card--header h1 {
  font-size: 1rem;
  font-weight: 800;
  letter-spacing: -0.02em;
}
.card--header h1 em {
  font-style: normal;
  color: var(--emerald);
}
.card--header .header-steps {
  display: flex;
  gap: 0.4rem;
  align-items: center;
}
.header-step-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  transition: background 0.3s, transform 0.3s;
}
.header-step-dot.active {
  background: var(--emerald);
  transform: scale(1.4);
}
.header-step-dot.done {
  background: var(--emerald-deep);
}
.header-step-labels {
  display: flex;
  gap: 0.15rem;
  margin-left: 0.6rem;
}
.header-step-label {
  font-size: 0.6rem;
  font-weight: 600;
  color: rgba(255,255,255,0.3);
  padding: 0.2rem 0.45rem;
  border-radius: 4px;
  transition: color 0.3s;
}
.header-step-label.active { color: var(--emerald-light); }
.header-step-label.done { color: rgba(255,255,255,0.5); }

/* Completed state */
.card--header.completed {
  padding: 0.6rem 1.4rem;
  background: var(--emerald-dark);
}
.card--header.completed h1 { display: none; }
.card--header.completed .header-steps { display: none; }
.completed-msg { display: none; }
.card--header.completed .completed-msg {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.78rem;
  font-weight: 700;
  color: var(--white);
  width: 100%;
  justify-content: center;
}

/* ============================================================
   PAYMENT CONFIRMED BANNER
   ============================================================ */
.card--paid {
  grid-column: 1 / -1;
  background: var(--emerald-pale);
  border: 1.5px solid var(--emerald);
  padding: 1rem 1.4rem;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  animation-delay: 0.03s;
}
.paid-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background: var(--emerald-deep);
  color: var(--white);
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.paid-text {
  flex: 1;
}
.paid-text strong {
  font-size: 0.88rem;
  font-weight: 700;
  color: var(--emerald-dark);
  display: block;
  margin-bottom: 0.1rem;
}
.paid-text span {
  font-size: 0.75rem;
  color: var(--emerald-deep);
}

/* ============================================================
   STEP 1 — COUNTRY
   ============================================================ */
.card--country {
  grid-column: 1 / -1;
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
  animation-delay: 0.06s;
}
.card--country .step-content { flex: 1; min-width: 0; }
.card--country h2 {
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 0.25rem;
}
.card--country .step-sub {
  font-size: 0.82rem;
  color: var(--slate-500);
  margin-bottom: 1rem;
}
.country-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 8px;
  margin-bottom: 0.8rem;
}
.country-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.55rem 0.8rem;
  border: 1.5px solid var(--gray-100);
  border-radius: 10px;
  background: var(--white);
  font-family: var(--font);
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--slate-900);
  cursor: pointer;
  transition: all 0.15s;
}
.country-btn:hover { border-color: var(--emerald); background: var(--emerald-pale); }
.country-btn.selected {
  border-color: var(--emerald);
  background: var(--emerald-pale);
  color: var(--emerald-dark);
}
.country-btn .cb-flag { font-size: 1.1rem; }
.country-other-wrap {
  position: relative;
  max-width: 280px;
}
.country-other-input {
  width: 100%;
  padding: 0.55rem 0.8rem;
  border: 1.5px solid var(--gray-100);
  border-radius: 10px;
  font-family: var(--font);
  font-size: 0.8rem;
  color: var(--slate-900);
  background: var(--snow);
  outline: none;
  transition: border-color 0.2s;
}
.country-other-input:focus { border-color: var(--emerald); background: var(--white); }
.country-other-input::placeholder { color: var(--slate-400); }

/* ============================================================
   STEP 2 — CATEGORY
   ============================================================ */
.card--category-pick {
  grid-column: 1 / -1;
  animation-delay: 0.12s;
}
.category-options {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 1rem;
}
@media (max-width: 640px) {
  .category-options { grid-template-columns: repeat(2, 1fr); }
}
.cat-option {
  border: 1.5px solid var(--gray-100);
  border-radius: 16px;
  padding: 1.2rem 0.8rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  background: var(--white);
  position: relative;
}
.cat-option:hover { border-color: var(--emerald); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.05); }
.cat-option.selected {
  border-color: var(--emerald);
  background: var(--emerald-pale);
}
.cat-option .cat-icon {
  font-size: 2rem;
  margin-bottom: 0.7rem;
  display: block;
}
.cat-option .cat-name {
  font-size: 1rem;
  font-weight: 700;
  margin-bottom: 0.2rem;
}
.cat-option .cat-sub {
  font-size: 0.75rem;
  color: var(--slate-500);
}
.cat-option.selected .cat-sub { color: var(--emerald-deep); }

/* Cat name/sub sizing */

/* ============================================================
   STEP 3 — UPLOAD
   ============================================================ */
.card--upload {
  grid-column: 1 / -1;
  animation-delay: 0.18s;
}
.upload-slots {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-top: 1rem;
}
@media (max-width: 640px) {
  .upload-slots { grid-template-columns: 1fr; }
}
.upload-slot {
  border: 1.5px solid var(--gray-100);
  border-radius: 16px;
  padding: 1.2rem;
  background: var(--white);
  transition: border-color 0.2s, max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
}
.upload-slot.has-file {
  border-color: var(--emerald);
}
.slot-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.6rem;
}
.slot-num {
  width: 24px;
  height: 24px;
  border-radius: 8px;
  background: var(--emerald-pale);
  color: var(--emerald-deep);
  font-size: 0.72rem;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: center;
}
.slot-tag {
  font-size: 0.62rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  padding: 0.2rem 0.55rem;
  border-radius: 100px;
}
.slot-tag--required { background: var(--red-pale); color: var(--red); }
.slot-tag--recommended { background: var(--amber-pale); color: #92400E; }
.slot-tag--optional { background: var(--blue-pale); color: #2563EB; }
.slot-title {
  font-size: 0.92rem;
  font-weight: 700;
  margin-bottom: 0.15rem;
}
.slot-hint {
  font-size: 0.75rem;
  color: var(--slate-400);
  margin-bottom: 0.8rem;
}
.slot-dropzone {
  border: 2px dashed var(--gray-200);
  border-radius: 12px;
  padding: 1.5rem 1rem;
  text-align: center;
  cursor: pointer;
  background: var(--snow);
  position: relative;
  transition: all 0.2s;
}
.slot-dropzone:hover {
  border-color: var(--emerald);
  background: var(--emerald-pale);
}
.slot-drop-icon { font-size: 1.5rem; display: block; margin-bottom: 0.3rem; }
.slot-drop-text { font-size: 0.78rem; color: var(--slate-500); font-weight: 600; }
.slot-dropzone input[type="file"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}
.slot-preview {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  aspect-ratio: 4/3;
  border: 1.5px solid var(--emerald);
}
.slot-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: top center;
}
.slot-remove {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--red);
  color: var(--white);
  border: none;
  font-size: 0.7rem;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Mobile: collapse extra slots */
@media (max-width: 640px) {
  .upload-slot.extra-slot {
    display: none;
  }
  .upload-slot.extra-slot.revealed {
    display: block;
  }
}
.add-more-btn {
  display: none;
  width: 100%;
  margin-top: 0.8rem;
  padding: 0.7rem;
  border: 1.5px dashed var(--gray-200);
  border-radius: 12px;
  background: var(--snow);
  color: var(--slate-500);
  font-family: var(--font);
  font-size: 0.82rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.add-more-btn:hover { border-color: var(--emerald); color: var(--emerald-deep); background: var(--emerald-pale); }
@media (max-width: 640px) {
  .add-more-btn { display: block; }
  .add-more-btn.hidden { display: none; }
}

/* ============================================================
   STEP 4 — GENERATING REPORT (replaces old scan + pay)
   ============================================================ */
.card--generating {
  grid-column: 1 / -1;
  animation-delay: 0.24s;
  display: none;
  text-align: center;
  padding: 3rem 2rem;
}
.card--generating.visible { display: block; }
.gen-spinner {
  width: 48px;
  height: 48px;
  border: 3px solid var(--gray-100);
  border-top-color: var(--emerald);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto 1.2rem;
}
@keyframes spin { to { transform: rotate(360deg); } }
.gen-status {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--slate-900);
  margin-bottom: 0.4rem;
}
.gen-sub {
  font-size: 0.82rem;
  color: var(--slate-500);
}
.gen-steps {
  margin-top: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-width: 340px;
  margin-left: auto;
  margin-right: auto;
  text-align: left;
}
.gen-step {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-size: 0.78rem;
  color: var(--slate-400);
  transition: color 0.3s;
}
.gen-step.active { color: var(--emerald-deep); font-weight: 600; }
.gen-step.done { color: var(--slate-500); }
.gen-step-icon {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  background: var(--gray-100);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.65rem;
  flex-shrink: 0;
  transition: background 0.3s;
}
.gen-step.active .gen-step-icon { background: var(--emerald-pale); color: var(--emerald-deep); }
.gen-step.done .gen-step-icon { background: var(--emerald-deep); color: var(--white); }

/* ============================================================
   STEP 5 — FULL REPORT
   ============================================================ */
.card--report {
  grid-column: 1 / -1;
  animation-delay: 0.3s;
  display: none;
}
.card--report.visible { display: block; }
.report-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 0.8rem;
}
.report-verdict {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.45rem 1rem;
  border-radius: 100px;
  font-size: 0.78rem;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.verdict--red { background: var(--red-pale); color: var(--red); }
.verdict--amber { background: var(--amber-pale); color: #92400E; }
.verdict--green { background: var(--emerald-pale); color: var(--emerald-deep); }

.report-sections {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.report-section {
  border: 1.5px solid var(--gray-100);
  border-radius: 14px;
  overflow: hidden;
}
.report-section-header {
  display: flex;
  align-items: center;
  gap: 0.7rem;
  padding: 1rem 1.2rem;
  cursor: pointer;
  background: var(--snow);
  font-size: 0.9rem;
  font-weight: 700;
  transition: background 0.15s;
  user-select: none;
}
.report-section-header:hover { background: var(--emerald-pale); }
.report-section-header .rs-icon { font-size: 1.1rem; }
.report-section-header .rs-arrow {
  margin-left: auto;
  font-size: 0.7rem;
  color: var(--slate-400);
  transition: transform 0.2s;
}
.report-section.open .rs-arrow { transform: rotate(180deg); }
.report-section-body {
  padding: 0 1.2rem;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease, padding 0.3s ease;
}
.report-section.open .report-section-body {
  padding: 1rem 1.2rem;
  max-height: 1000px;
}
.report-section-body p {
  font-size: 0.85rem;
  line-height: 1.7;
  color: var(--slate-700);
}

/* ============================================================
   DELIVERY CARD
   ============================================================ */
.card--delivery {
  grid-column: 1 / -1;
  display: none;
  animation-delay: 0.36s;
}
.card--delivery.visible { display: block; }
.delivery-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 1rem;
}
@media (max-width: 640px) {
  .delivery-options { grid-template-columns: 1fr; }
}
.delivery-option {
  padding: 1.4rem;
  border: 1.5px solid var(--gray-100);
  border-radius: 14px;
  text-align: center;
  transition: all 0.2s;
}
.delivery-option:hover { border-color: var(--emerald); }
.delivery-option .do-icon { font-size: 1.8rem; margin-bottom: 0.6rem; display: block; }
.delivery-option h3 { font-size: 0.9rem; font-weight: 700; margin-bottom: 0.3rem; }
.delivery-option p { font-size: 0.75rem; color: var(--slate-500); margin-bottom: 0.8rem; }
.email-input-wrap {
  display: flex;
  gap: 6px;
}
.email-input {
  flex: 1;
  padding: 0.5rem 0.7rem;
  border: 1.5px solid var(--gray-200);
  border-radius: 8px;
  font-family: var(--font);
  font-size: 0.8rem;
  outline: none;
  min-width: 0;
}
.email-input:focus { border-color: var(--emerald); }
.email-send {
  padding: 0.5rem 0.9rem;
  border: none;
  border-radius: 8px;
  background: var(--emerald-deep);
  color: var(--white);
  font-family: var(--font);
  font-size: 0.78rem;
  font-weight: 700;
  cursor: pointer;
  white-space: nowrap;
}
.email-send:hover { background: var(--emerald-dark); }

/* ============================================================
   BUTTONS
   ============================================================ */
.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.9rem 1.5rem;
  border: none;
  border-radius: 12px;
  background: var(--emerald-deep);
  color: var(--white);
  font-family: var(--font);
  font-size: 0.95rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-primary:hover { background: var(--emerald-dark); transform: translateY(-1px); }
.btn-primary:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}
.btn-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1.2rem;
  border: 1.5px solid var(--gray-200);
  border-radius: 12px;
  background: var(--white);
  color: var(--slate-900);
  font-family: var(--font);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-secondary:hover { border-color: var(--emerald); background: var(--emerald-pale); }

/* ============================================================
   PRIVACY REMINDER
   ============================================================ */
.card--privacy-sm {
  grid-column: 1 / -1;
  background: linear-gradient(135deg, #064E3B 0%, #065F46 100%);
  color: var(--white);
  padding: 1.2rem 1.8rem;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  font-size: 0.78rem;
  animation-delay: 0.42s;
}
.card--privacy-sm .priv-icon { font-size: 1.2rem; flex-shrink: 0; }
.card--privacy-sm p { color: var(--emerald-light); font-weight: 500; }
.card--privacy-sm strong { color: var(--white); }

/* ============================================================
   FOOTER
   ============================================================ */
.card--footer {
  grid-column: 1 / -1;
  background: transparent;
  border: none;
  padding: 1rem 0.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.72rem;
  color: var(--slate-400);
  animation-delay: 0.48s;
}
.card--footer:hover { transform: none; box-shadow: none; }
.card--footer a { color: var(--slate-400); text-decoration: none; }
.card--footer a:hover { color: var(--emerald); }

/* ============================================================
   SHARED STEP STYLES
   ============================================================ */
.step-header {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 0.2rem;
}
.step-badge {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: var(--emerald-pale);
  color: var(--emerald-deep);
  font-size: 1rem;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.step-badge.done {
  background: var(--emerald-deep);
  color: var(--white);
}
.step-info h2 {
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 0.2rem;
}
.step-info .step-sub {
  font-size: 0.82rem;
  color: var(--slate-500);
}

</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-inner">
    <a href="/" class="topbar-brand">LISTING LENS</a>
    <a href="/" class="topbar-back">&larr; back to home</a>
  </div>
</div>

<div class="bento">

  <!-- HEADER — sticky progress bar -->
  <div class="card card--header" id="headerBar">
    <h1>your <em>report.</em></h1>
    <div class="header-steps">
      <div class="header-step-dot active" data-step="1"></div>
      <div class="header-step-dot" data-step="2"></div>
      <div class="header-step-dot" data-step="3"></div>
      <div class="header-step-labels">
        <span class="header-step-label active" data-step="1">country</span>
        <span class="header-step-label" data-step="2">type</span>
        <span class="header-step-label" data-step="3">upload</span>
      </div>
    </div>
    <div class="completed-msg">&#10003; report ready &mdash; scroll down to view</div>
  </div>

  <!-- PAYMENT CONFIRMED BANNER -->
  <div class="card card--paid">
    <div class="paid-icon">&#10003;</div>
    <div class="paid-text">
      <strong>payment confirmed &mdash; $5</strong>
      <span>tell us about your listing and we'll generate your report.</span>
    </div>
  </div>

  <!-- STEP 1: COUNTRY -->
  <div class="card card--country" id="step1">
    <div class="step-badge" id="badge1">1</div>
    <div class="step-content">
      <h2 translate="yes">where are you buying?</h2>
      <p class="step-sub" translate="yes">we'll tailor your report to local laws, taxes, and databases.</p>
      <div class="country-grid" id="countryGrid">
        <button class="country-btn" data-code="AU" data-name="Australia"><span class="cb-flag">&#x1F1E6;&#x1F1FA;</span>Australia</button>
        <button class="country-btn" data-code="JP" data-name="Japan"><span class="cb-flag">&#x1F1EF;&#x1F1F5;</span>Japan</button>
        <button class="country-btn" data-code="HK" data-name="Hong Kong"><span class="cb-flag">&#x1F1ED;&#x1F1F0;</span>Hong Kong</button>
        <button class="country-btn" data-code="KR" data-name="South Korea"><span class="cb-flag">&#x1F1F0;&#x1F1F7;</span>S. Korea</button>
        <button class="country-btn" data-code="NZ" data-name="New Zealand"><span class="cb-flag">&#x1F1F3;&#x1F1FF;</span>NZ</button>
        <button class="country-btn" data-code="SG" data-name="Singapore"><span class="cb-flag">&#x1F1F8;&#x1F1EC;</span>Singapore</button>
      </div>
      <div class="country-other-wrap">
        <input type="text" class="country-other-input" id="countryOther" placeholder="or type another country..." autocomplete="off">
      </div>
    </div>
  </div>

  <!-- STEP 2: CATEGORY -->
  <div class="card card--category-pick" id="step2">
    <div class="step-header">
      <div class="step-badge" id="badge2">2</div>
      <div class="step-info">
        <h2 translate="yes">what are you scanning?</h2>
        <p class="step-sub" translate="yes">pick a category so we search the right databases.</p>
      </div>
    </div>
    <div class="category-options">
      <div class="cat-option" data-cat="vehicle">
        <span class="cat-icon">&#x1F697;</span>
        <div class="cat-name" translate="yes">Vehicle</div>
        <div class="cat-sub" translate="yes">car, ute, SUV, van</div>
      </div>
      <div class="cat-option" data-cat="property">
        <span class="cat-icon">&#x1F3E0;</span>
        <div class="cat-name" translate="yes">Property</div>
        <div class="cat-sub" translate="yes">house, apartment, land</div>
      </div>
      <div class="cat-option" data-cat="motorcycle">
        <span class="cat-icon">&#x1F3CD;&#xFE0F;</span>
        <div class="cat-name" translate="yes">Motorcycle</div>
        <div class="cat-sub" translate="yes">motorbike, scooter</div>
      </div>
      <div class="cat-option" data-cat="boat">
        <span class="cat-icon">&#x26F5;</span>
        <div class="cat-name" translate="yes">Boat</div>
        <div class="cat-sub" translate="yes">boat, jetski, yacht</div>
      </div>
      <div class="cat-option" data-cat="watch">
        <span class="cat-icon">&#x231A;</span>
        <div class="cat-name" translate="yes">Watch</div>
        <div class="cat-sub" translate="yes">luxury, vintage, smart</div>
      </div>
      <div class="cat-option" data-cat="electronics">
        <span class="cat-icon">&#x1F4BB;</span>
        <div class="cat-name" translate="yes">Electronics</div>
        <div class="cat-sub" translate="yes">phone, laptop, camera</div>
      </div>
      <div class="cat-option" data-cat="jewellery">
        <span class="cat-icon">&#x1F48D;</span>
        <div class="cat-name" translate="yes">Jewellery</div>
        <div class="cat-sub" translate="yes">rings, necklaces, gems</div>
      </div>
      <div class="cat-option" data-cat="instrument">
        <span class="cat-icon">&#x1F3B8;</span>
        <div class="cat-name" translate="yes">Instrument</div>
        <div class="cat-sub" translate="yes">guitar, piano, drums</div>
      </div>
    </div>
  </div>

  <!-- STEP 3: UPLOAD -->
  <div class="card card--upload" id="step3">
    <div class="step-header">
      <div class="step-badge" id="badge3">3</div>
      <div class="step-info">
        <h2 translate="yes">upload your screenshots</h2>
        <p class="step-sub" translate="yes">more screenshots = more detail in your report.</p>
      </div>
    </div>
    <div class="upload-slots" id="uploadSlots">

      <!-- Slot 1: Required -->
      <div class="upload-slot" id="slot1">
        <div class="slot-label">
          <span class="slot-num">1</span>
          <span class="slot-tag slot-tag--required" translate="yes">required</span>
        </div>
        <div class="slot-title" translate="yes">main listing</div>
        <div class="slot-hint" id="hint1" translate="yes">the photo, price, and headline</div>
        <div class="slot-dropzone" data-slot="1">
          <span class="slot-drop-icon">&#x1F4F8;</span>
          <span class="slot-drop-text" translate="yes">tap to upload</span>
          <input type="file" accept="image/*" data-slot="1">
        </div>
        <div class="slot-preview" data-slot="1" style="display:none;">
          <img alt="Screenshot 1">
          <button class="slot-remove" data-slot="1">&#x2715;</button>
        </div>
      </div>

      <!-- Slot 2: Recommended -->
      <div class="upload-slot extra-slot" id="slot2">
        <div class="slot-label">
          <span class="slot-num">2</span>
          <span class="slot-tag slot-tag--recommended" translate="yes">recommended</span>
        </div>
        <div class="slot-title" id="title2" translate="yes">details &amp; specs</div>
        <div class="slot-hint" id="hint2" translate="yes">mileage, features, condition notes</div>
        <div class="slot-dropzone" data-slot="2">
          <span class="slot-drop-icon">&#x1F4CB;</span>
          <span class="slot-drop-text" translate="yes">tap to upload</span>
          <input type="file" accept="image/*" data-slot="2">
        </div>
        <div class="slot-preview" data-slot="2" style="display:none;">
          <img alt="Screenshot 2">
          <button class="slot-remove" data-slot="2">&#x2715;</button>
        </div>
      </div>

      <!-- Slot 3: Optional -->
      <div class="upload-slot extra-slot" id="slot3">
        <div class="slot-label">
          <span class="slot-num">3</span>
          <span class="slot-tag slot-tag--optional" translate="yes">optional</span>
        </div>
        <div class="slot-title" id="title3" translate="yes">extra info</div>
        <div class="slot-hint" id="hint3" translate="yes">seller profile, location, anything else</div>
        <div class="slot-dropzone" data-slot="3">
          <span class="slot-drop-icon">&#x1F4CE;</span>
          <span class="slot-drop-text" translate="yes">tap to upload</span>
          <input type="file" accept="image/*" data-slot="3">
        </div>
        <div class="slot-preview" data-slot="3" style="display:none;">
          <img alt="Screenshot 3">
          <button class="slot-remove" data-slot="3">&#x2715;</button>
        </div>
      </div>

    </div>

    <!-- Mobile: add more screenshots button -->
    <button class="add-more-btn" id="addMoreBtn" translate="yes">+ add more screenshots for a better report</button>

    <div style="margin-top:1.2rem;">
      <button class="btn-primary" id="generateBtn" disabled translate="yes">generate my report</button>
    </div>
  </div>

  <!-- STEP 4: GENERATING REPORT -->
  <div class="card card--generating" id="step4">
    <div class="gen-spinner"></div>
    <div class="gen-status" translate="yes">generating your report...</div>
    <div class="gen-sub" translate="yes">this usually takes 30&ndash;60 seconds.</div>
    <div class="gen-steps">
      <div class="gen-step active" id="genStep1">
        <span class="gen-step-icon">1</span>
        <span translate="yes">reading your screenshots</span>
      </div>
      <div class="gen-step" id="genStep2">
        <span class="gen-step-icon">2</span>
        <span translate="yes">searching recalls, databases &amp; records</span>
      </div>
      <div class="gen-step" id="genStep3">
        <span class="gen-step-icon">3</span>
        <span translate="yes">analysing hidden costs &amp; red flags</span>
      </div>
      <div class="gen-step" id="genStep4">
        <span class="gen-step-icon">4</span>
        <span translate="yes">writing your report</span>
      </div>
    </div>
  </div>

  <!-- STEP 5: FULL REPORT -->
  <div class="card card--report" id="step5">
    <div class="report-header">
      <h2 translate="yes">your report</h2>
      <div class="report-verdict verdict--amber" id="reportVerdict">&#x26A0;&#xFE0F; CAUTION</div>
    </div>
    <div class="report-sections" id="reportSections">
      <!-- populated by JS / API response -->
    </div>
  </div>

  <!-- DELIVERY -->
  <div class="card card--delivery" id="deliveryCard">
    <div class="step-header">
      <div class="step-badge done">&#10003;</div>
      <div class="step-info">
        <h2 translate="yes">save your report</h2>
        <p class="step-sub" translate="yes">once you leave this page, your report and screenshots are permanently deleted.</p>
      </div>
    </div>
    <div class="delivery-options">
      <div class="delivery-option">
        <span class="do-icon">&#x1F4E5;</span>
        <h3 translate="yes">download PDF</h3>
        <p translate="yes">save to your device</p>
        <button class="btn-secondary" id="downloadBtn" translate="yes">download report</button>
      </div>
      <div class="delivery-option">
        <span class="do-icon">&#x1F4E7;</span>
        <h3 translate="yes">email a copy</h3>
        <p translate="yes">we send it and forget your address. <a href="/privacy.html" style="color:var(--slate-500);text-decoration:underline;" translate="yes">privacy promise</a></p>
        <div class="email-input-wrap">
          <input type="email" class="email-input" id="emailInput" placeholder="your@email.com">
          <button class="email-send" id="emailSend" translate="yes">send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PRIVACY -->
  <div class="card card--privacy-sm">
    <span class="priv-icon">&#x1F512;</span>
    <p translate="yes"><strong>Your privacy is sacred.</strong> Screenshots are analysed and permanently deleted. We never store your email address.</p>
  </div>

  <!-- FOOTER -->
  <div class="card card--footer">
    <div class="notranslate">LISTING LENS &copy; 2026</div>
    <div><a href="/" translate="yes">Home</a> &middot; <a href="/terms" translate="yes">Terms</a></div>
  </div>

</div>

<script>
// ============================================================
// STATE
// ============================================================
var state = {
  country: null,
  category: null,
  slots: { 1: null, 2: null, 3: null },
  step: 1
};

// ============================================================
// DYNAMIC SLOT HINTS — change based on category
// ============================================================
var slotHints = {
  vehicle: {
    title2: 'details & specs',
    hint1: 'the photo, price, and headline',
    hint2: 'mileage, features, service history',
    title3: 'extra info',
    hint3: 'seller profile, rego details, anything else'
  },
  property: {
    title2: 'property details',
    hint1: 'the photo, price, and address',
    hint2: 'floor plan, strata info, inspection notes',
    title3: 'extra info',
    hint3: 'building history, agent details, anything else'
  },
  motorcycle: {
    title2: 'details & specs',
    hint1: 'the photo, price, and headline',
    hint2: 'mileage, engine size, service history',
    title3: 'extra info',
    hint3: 'seller profile, rego details, modifications'
  },
  boat: {
    title2: 'details & specs',
    hint1: 'the photo, price, and headline',
    hint2: 'engine hours, hull type, survey status',
    title3: 'extra info',
    hint3: 'trailer details, mooring info, anything else'
  },
  watch: {
    title2: 'details & provenance',
    hint1: 'the photo, price, and model name',
    hint2: 'serial number, box & papers, condition',
    title3: 'extra info',
    hint3: 'seller history, service records, anything else'
  },
  electronics: {
    title2: 'details & specs',
    hint1: 'the photo, price, and model',
    hint2: 'specs, condition, warranty status',
    title3: 'extra info',
    hint3: 'seller profile, purchase receipt, anything else'
  },
  jewellery: {
    title2: 'details & certification',
    hint1: 'the photo, price, and description',
    hint2: 'certification, carat, metal type, hallmarks',
    title3: 'extra info',
    hint3: 'seller credentials, valuation, anything else'
  },
  instrument: {
    title2: 'details & specs',
    hint1: 'the photo, price, and model',
    hint2: 'year, condition, serial number',
    title3: 'extra info',
    hint3: 'seller profile, sound samples, anything else'
  },
  default: {
    title2: 'details & specs',
    hint1: 'the photo, price, and headline',
    hint2: 'condition, features, specifications',
    title3: 'extra info',
    hint3: 'seller profile, location, anything else'
  }
};

function updateSlotHints(category) {
  var hints = slotHints[category] || slotHints['default'];
  document.getElementById('hint1').textContent = hints.hint1;
  document.getElementById('title2').textContent = hints.title2;
  document.getElementById('hint2').textContent = hints.hint2;
  document.getElementById('title3').textContent = hints.title3;
  document.getElementById('hint3').textContent = hints.hint3;
}

// ============================================================
// COUNTRY SELECTION
// ============================================================
document.querySelectorAll('.country-btn').forEach(function(btn) {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.country-btn').forEach(function(b) { b.classList.remove('selected'); });
    btn.classList.add('selected');
    state.country = { code: btn.dataset.code, name: btn.dataset.name };

    // Clear the "other" input when a button is selected
    document.getElementById('countryOther').value = '';

    try { localStorage.setItem('ll_country', JSON.stringify(state.country)); } catch(e) {}
    document.getElementById('badge1').classList.add('done');
    document.getElementById('badge1').textContent = '\u2713';
    updateDots();
  });
});

// "Other" country input
document.getElementById('countryOther').addEventListener('input', function() {
  var val = this.value.trim();
  if (val.length >= 2) {
    document.querySelectorAll('.country-btn').forEach(function(b) { b.classList.remove('selected'); });
    state.country = { code: 'OTHER', name: val };
    document.getElementById('badge1').classList.add('done');
    document.getElementById('badge1').textContent = '\u2713';
    updateDots();
  }
});

// Load saved country
try {
  var saved = JSON.parse(localStorage.getItem('ll_country'));
  if (saved && saved.code !== 'OTHER') {
    var match = document.querySelector('.country-btn[data-code="' + saved.code + '"]');
    if (match) { match.click(); }
  }
} catch(e) {}

// ============================================================
// CATEGORY SELECTION
// ============================================================
document.querySelectorAll('.cat-option').forEach(function(opt) {
  opt.addEventListener('click', function() {
    document.querySelectorAll('.cat-option').forEach(function(o) { o.classList.remove('selected'); });
    opt.classList.add('selected');
    state.category = opt.dataset.cat;
    document.getElementById('badge2').classList.add('done');
    document.getElementById('badge2').textContent = '\u2713';
    updateSlotHints(state.category);
    updateDots();
  });
});

// ============================================================
// MOBILE: ADD MORE SCREENSHOTS
// ============================================================
var addMoreBtn = document.getElementById('addMoreBtn');
addMoreBtn.addEventListener('click', function() {
  document.querySelectorAll('.extra-slot').forEach(function(slot) {
    slot.classList.add('revealed');
  });
  addMoreBtn.classList.add('hidden');
});

// ============================================================
// FILE UPLOAD — 3 separate slots
// ============================================================
var generateBtn = document.getElementById('generateBtn');

document.querySelectorAll('.slot-dropzone input[type="file"]').forEach(function(input) {
  input.addEventListener('change', function() {
    var slotNum = this.dataset.slot;
    if (this.files.length > 0) {
      var file = this.files[0];
      if (!file.type.startsWith('image/')) return;
      if (file.size > 10 * 1024 * 1024) { alert('File too large \u2014 max 10MB'); return; }

      state.slots[slotNum] = file;
      var reader = new FileReader();
      reader.onload = function(e) {
        var slot = document.getElementById('slot' + slotNum);
        var dropzone = slot.querySelector('.slot-dropzone');
        var preview = slot.querySelector('.slot-preview');
        preview.querySelector('img').src = e.target.result;
        dropzone.style.display = 'none';
        preview.style.display = 'block';
        slot.classList.add('has-file');
        updateGenerateBtn();
      };
      reader.readAsDataURL(file);
    }
  });
});

document.querySelectorAll('.slot-remove').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var slotNum = this.dataset.slot;
    state.slots[slotNum] = null;
    var slot = document.getElementById('slot' + slotNum);
    var dropzone = slot.querySelector('.slot-dropzone');
    var preview = slot.querySelector('.slot-preview');
    var input = dropzone.querySelector('input[type="file"]');
    input.value = '';
    dropzone.style.display = 'block';
    preview.style.display = 'none';
    slot.classList.remove('has-file');
    updateGenerateBtn();
  });
});

function updateGenerateBtn() {
  var hasRequired = state.slots[1] !== null;
  generateBtn.disabled = !hasRequired;
  if (hasRequired) {
    document.getElementById('badge3').classList.add('done');
    document.getElementById('badge3').textContent = '\u2713';
  } else {
    document.getElementById('badge3').classList.remove('done');
    document.getElementById('badge3').textContent = '3';
  }
  updateDots();
}

function getUploadedFiles() {
  return [state.slots[1], state.slots[2], state.slots[3]].filter(Boolean);
}

// ============================================================
// GENERATE REPORT
// ============================================================
generateBtn.addEventListener('click', function() {
  if (!state.country) { alert('Please select your country first.'); return; }
  if (!state.category) { alert('Please select a category first.'); return; }
  if (!state.slots[1]) { alert('Please upload at least the main listing screenshot.'); return; }

  // Show generating card
  var step4 = document.getElementById('step4');
  step4.classList.add('visible');
  step4.scrollIntoView({ behavior: 'smooth', block: 'start' });

  // Disable generate button
  generateBtn.disabled = true;
  generateBtn.textContent = 'generating...';

  // Animate through the generation steps
  var genSteps = ['genStep1', 'genStep2', 'genStep3', 'genStep4'];
  var currentGenStep = 0;

  function advanceGenStep() {
    if (currentGenStep > 0) {
      var prev = document.getElementById(genSteps[currentGenStep - 1]);
      prev.classList.remove('active');
      prev.classList.add('done');
      prev.querySelector('.gen-step-icon').textContent = '\u2713';
    }
    if (currentGenStep < genSteps.length) {
      document.getElementById(genSteps[currentGenStep]).classList.add('active');
      currentGenStep++;
    }
  }

  // Simulate step progression (replace with real API call timing)
  setTimeout(function() { advanceGenStep(); }, 2000);
  setTimeout(function() { advanceGenStep(); }, 5000);
  setTimeout(function() { advanceGenStep(); }, 8000);

  // Show report after "generation" completes
  setTimeout(function() {
    // Mark last step done
    var lastStep = document.getElementById(genSteps[genSteps.length - 1]);
    lastStep.classList.remove('active');
    lastStep.classList.add('done');
    lastStep.querySelector('.gen-step-icon').textContent = '\u2713';

    // Update header to completed state
    document.getElementById('headerBar').classList.add('completed');

    // Hide generating card, show report
    step4.classList.remove('visible');

    var step5 = document.getElementById('step5');
    var delivery = document.getElementById('deliveryCard');
    step5.classList.add('visible');
    delivery.classList.add('visible');
    step5.scrollIntoView({ behavior: 'smooth', block: 'start' });

    // Demo report sections (replace with real API response)
    var sectionsEl = document.getElementById('reportSections');
    var sections = [];

    if (state.category === 'vehicle' || state.category === 'motorcycle') {
      sections = [
        { icon: '\uD83D\uDEA8', title: 'Critical Findings', body: 'Your full report will appear here after our AI analyses your listing screenshots. This section covers safety recalls, registration issues, and critical red flags specific to this vehicle.' },
        { icon: '\uD83D\uDCB0', title: 'Hidden Costs', body: 'Stamp duty, transfer fees, registration, CTP insurance, and ongoing costs that aren\'t in the listing price \u2014 calculated for your state and this specific vehicle.' },
        { icon: '\uD83D\uDCCA', title: 'Market Analysis', body: 'Comparable listings, recent sales data, price trend analysis, and fair value estimate with confidence range for this make, model, year, and mileage.' },
        { icon: '\u2753', title: 'Questions to Ask the Seller', body: 'Specific questions tailored to this listing \u2014 based on what we found (and what we couldn\'t verify) \u2014 that you should ask before committing.' },
        { icon: '\u2696\uFE0F', title: 'Your Rights', body: 'Consumer protection laws, cooling-off periods, warranty obligations, and disclosure requirements in your jurisdiction.' },
        { icon: '\u2705', title: 'Verdict & Sources', body: 'Overall assessment with a clear recommendation \u2014 plus every source we used, linked so you can verify everything yourself.' }
      ];
    } else if (state.category === 'property') {
      sections = [
        { icon: '\uD83D\uDEA8', title: 'Critical Findings', body: 'Your full report will appear here after our AI analyses your listing screenshots. This section covers building defects, government orders, planning issues, and critical red flags specific to this property.' },
        { icon: '\uD83D\uDCB0', title: 'Hidden Costs', body: 'Stamp duty, strata levies, council rates, water rates, and ongoing costs that aren\'t in the listing price \u2014 calculated for your state and this specific property.' },
        { icon: '\uD83D\uDCCA', title: 'Market Analysis', body: 'Comparable sales, median prices for the area, rental yield estimates, and fair value assessment for this property type and location.' },
        { icon: '\u2753', title: 'Questions to Ask', body: 'Specific questions tailored to this listing \u2014 covering anything the agent or seller hasn\'t disclosed that they should have.' },
        { icon: '\u2696\uFE0F', title: 'Your Legal Rights', body: 'Cooling-off periods, strata disclosure obligations, building and pest inspection rights, and what the vendor must legally tell you.' },
        { icon: '\u2705', title: 'Verdict & Sources', body: 'Overall assessment with a clear recommendation \u2014 plus every government record, database, and source we used, linked for your verification.' }
      ];
    } else {
      // All other categories: watch, boat, electronics, jewellery, instrument
      var catName = state.category || 'item';
      sections = [
        { icon: '\uD83D\uDEA8', title: 'Red Flags & Authenticity', body: 'Your full report will appear here after our AI analyses your listing screenshots. This section covers authenticity concerns, known fakes and counterfeits, condition issues, and anything the listing isn\'t telling you.' },
        { icon: '\uD83D\uDCB0', title: 'Hidden Costs & True Price', body: 'Import duties, taxes, shipping, insurance, maintenance costs, and anything else that adds to what you\'ll actually pay beyond the listed price.' },
        { icon: '\uD83D\uDCCA', title: 'Market Analysis', body: 'What this item typically sells for, comparable listings, price history, and whether the asking price is fair, high, or a bargain.' },
        { icon: '\u2753', title: 'Questions to Ask the Seller', body: 'Specific questions based on what we found in the listing \u2014 designed to uncover anything the seller hasn\'t disclosed.' },
        { icon: '\uD83D\uDEE1\uFE0F', title: 'Buyer Protection', body: 'Your consumer rights, platform protections, return policies, and what recourse you have if something goes wrong.' },
        { icon: '\u2705', title: 'Verdict & Sources', body: 'Overall assessment with a clear recommendation \u2014 plus every source we used, linked so you can verify everything yourself.' }
      ];
    }

    sectionsEl.innerHTML = sections.map(function(s, i) {
      return '<div class="report-section' + (i === 0 ? ' open' : '') + '">' +
        '<div class="report-section-header" onclick="this.parentElement.classList.toggle(\'open\')">' +
        '<span class="rs-icon">' + s.icon + '</span>' + s.title +
        '<span class="rs-arrow">\u25BC</span></div>' +
        '<div class="report-section-body"><p>' + s.body + '</p></div></div>';
    }).join('');

  }, 10000);
});

// ============================================================
// PROGRESS DOTS
// ============================================================
function updateDots() {
  var dots = document.querySelectorAll('.header-step-dot');
  var labels = document.querySelectorAll('.header-step-label');
  var step = 1;
  if (state.country) step = 2;
  if (state.country && state.category) step = 3;

  dots.forEach(function(dot, i) {
    dot.classList.remove('active', 'done');
    if (i + 1 < step) dot.classList.add('done');
    if (i + 1 === step) dot.classList.add('active');
  });
  labels.forEach(function(label, i) {
    label.classList.remove('active', 'done');
    if (i + 1 < step) label.classList.add('done');
    if (i + 1 === step) label.classList.add('active');
  });
}

// ============================================================
// PRODUCTION: Airwallex payment verification
// ============================================================
// In production, this page should verify the payment intent ID
// from the URL params (e.g. ?payment_intent=pi_xxx) against
// Airwallex via a Netlify Function before enabling the dashboard.
//
// Example flow:
// 1. Landing page → Airwallex checkout → redirect to /dashboard?payment_intent=pi_xxx
// 2. Dashboard loads → calls Netlify Function to verify payment
// 3. If valid → show dashboard (current state)
// 4. If invalid → redirect back to landing page
//
// For now, the dashboard is accessible directly for development.

</script>
</body>
</html>
