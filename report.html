<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Report ‚Äî Listing Lens</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;0,9..40,900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --white: #FFFFFF;
  --snow: #F9FAFB;
  --gray-100: #E5E7EB;
  --gray-200: #D1D5DB;
  --slate-900: #0F172A;
  --slate-800: #1E293B;
  --slate-700: #334155;
  --slate-600: #475569;
  --slate-500: #64748B;
  --slate-400: #94A3B8;
  --emerald: #10B981;
  --emerald-light: #6EE7B7;
  --emerald-pale: #D1FAE5;
  --emerald-deep: #059669;
  --emerald-dark: #064E3B;
  --red: #DC2626;
  --red-pale: #FEF2F2;
  --amber: #F59E0B;
  --amber-pale: #FFFBEB;
  --blue: #3B82F6;
  --blue-pale: #EFF6FF;
  --font: 'DM Sans', system-ui, -apple-system, sans-serif;
}

html { font-family: var(--font); -webkit-font-smoothing: antialiased; background: var(--snow); color: var(--slate-900); }
body { margin: 0; padding: 1rem; min-height: 100vh; }
@media (min-width: 768px) { body { padding: 2rem; } }

.report-wrapper { max-width: 720px; margin: 0 auto; }

/* TOP BAR */
.report-topbar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 0.8rem 0; margin-bottom: 1rem; border-bottom: 1px solid var(--gray-100);
}
.report-logo { font-size: 1rem; font-weight: 800; color: var(--slate-900); text-decoration: none; letter-spacing: -0.02em; }
.report-topbar-meta { font-size: 0.7rem; color: var(--slate-400); text-align: right; line-height: 1.5; }

/* LOADING */
.report-loading { text-align: center; padding: 4rem 1rem; }
.report-loading-spinner {
  width: 48px; height: 48px; border: 4px solid var(--gray-100); border-top-color: var(--emerald);
  border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 1.5rem;
}
@keyframes spin { to { transform: rotate(360deg); } }
.report-loading h2 { font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem; }
.report-loading-step { font-size: 0.85rem; color: var(--slate-500); margin-bottom: 0.3rem; transition: all 0.3s; }
.report-loading-step.active { color: var(--emerald-deep); font-weight: 600; }
.report-loading-step.done { color: var(--slate-400); }
.report-loading-step.done::before { content: '‚úì '; color: var(--emerald); }

/* ERROR */
.report-error { text-align: center; padding: 4rem 1rem; display: none; }
.report-error-icon { font-size: 2.5rem; margin-bottom: 1rem; }
.report-error h2 { font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--red); }
.report-error p { font-size: 0.85rem; color: var(--slate-500); line-height: 1.6; max-width: 400px; margin: 0 auto 1.5rem; }
.report-error-btn {
  display: inline-block; padding: 0.7rem 1.8rem; background: var(--slate-900); color: var(--white);
  font-family: var(--font); font-size: 0.85rem; font-weight: 700; border: none; border-radius: 10px;
  cursor: pointer; text-decoration: none; transition: all 0.15s;
}
.report-error-btn:hover { background: var(--emerald-deep); }

/* REPORT CARD */
.report-card { border: 2px solid var(--emerald); border-radius: 16px; overflow: hidden; background: var(--white); display: none; }

.report-header { background: var(--slate-900); padding: 1.2rem; }
.report-header-label { font-size: 0.65rem; font-weight: 700; color: var(--slate-400); letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 0.5rem; }
.report-header-title { font-size: 1.05rem; font-weight: 800; color: var(--white); line-height: 1.3; margin-bottom: 0.3rem; }
.report-header-meta { font-size: 0.78rem; color: var(--slate-400); line-height: 1.4; }
.report-header-category { display: inline-block; font-size: 0.6rem; font-weight: 700; background: rgba(255,255,255,0.1); color: var(--slate-400); padding: 0.2rem 0.6rem; border-radius: 100px; letter-spacing: 0.04em; text-transform: uppercase; margin-top: 0.6rem; }

/* VERDICT */
.report-verdict { display: flex; gap: 0.8rem; padding: 1.2rem; align-items: flex-start; }
.report-verdict--red { background: #FEF2F2; border-bottom: 2px solid #FECACA; }
.report-verdict--amber { background: #FFFBEB; border-bottom: 2px solid #FDE68A; }
.report-verdict--green { background: #F0FDF4; border-bottom: 2px solid #BBF7D0; }
.report-verdict-icon { font-size: 1.5rem; flex-shrink: 0; }
.report-verdict strong { display: block; font-size: 0.85rem; margin-bottom: 0.3rem; }
.report-verdict--red strong { color: #DC2626; }
.report-verdict--amber strong { color: #92400E; }
.report-verdict--green strong { color: #065F46; }
.report-verdict p { font-size: 0.78rem; line-height: 1.6; }
.report-verdict--red p { color: #7F1D1D; }
.report-verdict--amber p { color: #78350F; }
.report-verdict--green p { color: #064E3B; }

/* SECTIONS */
.report-section { padding: 1.2rem; border-bottom: 1px solid var(--gray-100); }
.report-section:last-of-type { border-bottom: none; }
.report-section h4 { font-size: 0.85rem; font-weight: 800; margin-bottom: 0.8rem; }

/* FLAGS */
.report-flag { padding: 0.8rem 1rem; border-radius: 10px; margin-bottom: 0.6rem; }
.report-flag--red { background: #FEF2F2; border-left: 4px solid #DC2626; }
.report-flag--amber { background: #FFFBEB; border-left: 4px solid #F59E0B; }
.report-flag--green { background: #F0FDF4; border-left: 3px solid #10B981; }
.report-flag strong { display: block; font-size: 0.8rem; margin-bottom: 0.3rem; }
.report-flag--red strong { color: #DC2626; }
.report-flag--amber strong { color: #92400E; }
.report-flag--green strong { color: #065F46; }
.report-flag p { font-size: 0.75rem; line-height: 1.6; color: var(--slate-600); }

/* OWNER SENTIMENT */
.report-sentiment { background: var(--blue-pale); border: 1px solid #BFDBFE; border-radius: 12px; padding: 1rem 1.2rem; }
.report-sentiment-summary { font-size: 0.8rem; color: var(--slate-700); line-height: 1.6; margin-bottom: 0.8rem; font-style: italic; }
.report-sentiment-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
@media (max-width: 520px) { .report-sentiment-columns { grid-template-columns: 1fr; } }
.report-sentiment-col h5 { font-size: 0.72rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
.report-sentiment-col.pros h5 { color: var(--emerald-deep); }
.report-sentiment-col.cons h5 { color: var(--red); }
.report-sentiment-col ul { list-style: none; padding: 0; }
.report-sentiment-col ul li { font-size: 0.75rem; color: var(--slate-600); line-height: 1.5; padding: 0.35rem 0; border-bottom: 1px solid rgba(0,0,0,0.05); }
.report-sentiment-col ul li:last-child { border-bottom: none; }
.report-sentiment-col.pros ul li::before { content: 'üëç '; }
.report-sentiment-col.cons ul li::before { content: 'üëé '; }

/* COSTS */
.report-costs { background: var(--snow); border-radius: 10px; overflow: hidden; }
.report-cost-row { display: flex; justify-content: space-between; padding: 0.5rem 1rem; font-size: 0.75rem; border-bottom: 1px solid var(--gray-100); }
.report-cost-row:last-child { border-bottom: none; }
.report-cost-row span:first-child { color: var(--slate-600); flex: 1; }
.report-cost-row span:last-child { font-weight: 700; color: var(--slate-900); white-space: nowrap; margin-left: 1rem; }
.report-cost-total { background: #FEF2F2; font-weight: 700; }
.report-cost-total span:last-child { color: #DC2626; }

/* QUESTIONS ‚Äî grouped cards */
.report-questions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
@media (max-width: 520px) { .report-questions-grid { grid-template-columns: 1fr; } }
.report-question-card { background: var(--snow); border: 1px solid var(--gray-100); border-radius: 8px; padding: 0.7rem 0.9rem; }
.report-question-category { display: block; font-size: 0.68rem; font-weight: 700; color: var(--emerald-deep); letter-spacing: 0.02em; margin-bottom: 0.25rem; }
.report-question-text { font-size: 0.75rem; color: var(--slate-600); line-height: 1.5; }

/* QUESTIONS ‚Äî flat (backward compat) */
.report-questions { display: flex; flex-direction: column; gap: 0.4rem; }
.report-question { font-size: 0.78rem; color: var(--slate-600); line-height: 1.5; padding: 0.5rem 0.8rem; background: var(--snow); border-radius: 8px; }

/* CHECKLIST */
.report-checklist { list-style: none; padding: 0; }
.report-checklist li { display: flex; gap: 0.6rem; align-items: flex-start; padding: 0.55rem 0; border-bottom: 1px solid var(--gray-100); font-size: 0.78rem; color: var(--slate-600); line-height: 1.5; }
.report-checklist li:last-child { border-bottom: none; }
.report-checkbox {
  flex-shrink: 0; width: 18px; height: 18px; border: 2px solid var(--gray-200); border-radius: 4px;
  margin-top: 1px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s;
}
.report-checkbox.checked { background: var(--emerald); border-color: var(--emerald); }
.report-checkbox.checked::after { content: '‚úì'; color: white; font-size: 11px; font-weight: 700; }

/* TEXT (rights etc) */
.report-text { font-size: 0.78rem; color: var(--slate-600); line-height: 1.7; }

/* SOURCES */
.report-sources { display: flex; flex-direction: column; gap: 0.4rem; }
.report-sources a { font-size: 0.75rem; color: var(--emerald-deep); text-decoration: none; padding: 0.45rem 0.8rem; background: var(--snow); border-radius: 8px; border: 1px solid var(--gray-100); transition: all 0.15s; display: block; word-break: break-word; }
.report-sources a:hover { background: var(--emerald-pale); border-color: var(--emerald); }
.report-source-nolink { font-size: 0.75rem; color: var(--slate-500); padding: 0.45rem 0.8rem; background: var(--snow); border-radius: 8px; border: 1px solid var(--gray-100); display: block; }

/* FOOTER */
.report-footer { padding: 0.8rem 1.2rem; background: var(--snow); border-top: 1px solid var(--gray-100); text-align: center; }
.report-footer p { font-size: 0.68rem; color: var(--slate-400); font-style: italic; }

/* DELIVERY */
.delivery-card { margin-top: 1rem; background: var(--white); border: 1.5px solid var(--gray-100); border-radius: 16px; padding: 1.5rem; display: none; }
.delivery-card h3 { font-size: 0.9rem; font-weight: 800; margin-bottom: 1rem; }
.delivery-actions { display: flex; flex-direction: column; gap: 0.6rem; }
.delivery-btn { display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1.2rem; border-radius: 10px; font-family: var(--font); font-size: 0.85rem; font-weight: 700; cursor: pointer; transition: all 0.15s; border: none; text-decoration: none; }
.delivery-btn--pdf { background: var(--slate-900); color: var(--white); }
.delivery-btn--pdf:hover { background: var(--emerald-deep); }
.delivery-btn--email { background: var(--white); color: var(--slate-700); border: 1.5px solid var(--gray-200); }
.delivery-btn--email:hover { border-color: var(--emerald); color: var(--emerald-deep); }
.delivery-email-form { display: none; margin-top: 0.8rem; }
.delivery-email-input { width: 100%; padding: 0.7rem 1rem; border: 1.5px solid var(--gray-200); border-radius: 10px; font-family: var(--font); font-size: 0.85rem; outline: none; transition: border-color 0.15s; margin-bottom: 0.5rem; }
.delivery-email-input:focus { border-color: var(--emerald); }
.delivery-email-send { width: 100%; padding: 0.65rem; background: var(--emerald); color: var(--white); border: none; border-radius: 10px; font-family: var(--font); font-size: 0.82rem; font-weight: 700; cursor: pointer; transition: all 0.15s; }
.delivery-email-send:hover { background: var(--emerald-deep); }
.delivery-email-note { font-size: 0.7rem; color: var(--slate-400); margin-top: 0.4rem; text-align: center; }

/* DATA WARNING */
.data-warning { margin-top: 1rem; padding: 1rem 1.2rem; background: #FFFBEB; border: 1.5px solid #FDE68A; border-radius: 12px; display: none; }
.data-warning p { font-size: 0.78rem; color: #92400E; line-height: 1.5; text-align: center; }
.data-warning strong { font-weight: 700; }

/* ANOTHER REPORT */
.another-report { margin-top: 1.5rem; text-align: center; padding-bottom: 2rem; display: none; }
.another-report a { display: inline-block; padding: 0.75rem 2rem; background: var(--white); color: var(--slate-700); font-family: var(--font); font-size: 0.85rem; font-weight: 700; border: 1.5px solid var(--gray-200); border-radius: 10px; text-decoration: none; transition: all 0.15s; }
.another-report a:hover { border-color: var(--emerald); color: var(--emerald-deep); }

/* PRINT */
@media print {
  body { padding: 0; background: white; }
  .report-loading, .report-error, .delivery-card, .data-warning, .another-report, .report-page-footer { display: none !important; }
  .report-card { border: none !important; display: block !important; }
  .report-wrapper { max-width: 100%; }
  .report-topbar { border-bottom: 2px solid #000; }
  .report-header, .report-verdict, .report-flag, .report-cost-total, .report-sentiment,
  .report-question-card, .report-checkbox.checked { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .report-sources a { color: #000; border: 1px solid #ccc; }
  .report-checkbox { border-color: #999; }
}

/* PAGE FOOTER */
.report-page-footer { text-align: center; padding: 1.5rem 0 2rem; margin-top: 1rem; border-top: 1px solid var(--gray-100); }
.report-page-footer a { font-size: 0.72rem; color: var(--slate-400); text-decoration: none; margin: 0 0.5rem; }
.report-page-footer a:hover { color: var(--emerald-deep); }
</style>
</head>
<body>
<div class="report-wrapper">

  <div class="report-topbar">
    <a href="/" class="report-logo">LISTING LENS</a>
    <div class="report-topbar-meta"><div id="reportDate"></div><div id="reportCategory"></div></div>
  </div>

  <div class="report-loading" id="reportLoading">
    <div class="report-loading-spinner"></div>
    <h2>generating your report</h2>
    <div class="report-loading-step active" id="step1">reading your screenshots...</div>
    <div class="report-loading-step" id="step2">searching databases &amp; public records...</div>
    <div class="report-loading-step" id="step3">analysing red flags &amp; pricing...</div>
    <div class="report-loading-step" id="step4">writing your report...</div>
  </div>

  <div class="report-error" id="reportError">
    <div class="report-error-icon">‚ö†Ô∏è</div>
    <h2>something went wrong</h2>
    <p id="reportErrorMsg">We couldn't generate your report. Your payment is safe ‚Äî please try again or contact us.</p>
    <a href="mailto:help@listinglens.app" class="report-error-btn">contact us</a>
  </div>

  <div class="report-card" id="reportCard">
    <div class="report-header">
      <div class="report-header-label">LISTING LENS REPORT</div>
      <div class="report-header-title" id="reportTitle"></div>
      <div class="report-header-meta" id="reportMeta"></div>
      <span class="report-header-category" id="reportCatBadge"></span>
    </div>
    <div id="reportVerdict"></div>
    <div id="reportSections"></div>
    <div class="report-footer">
      <p>This report was generated by Listing Lens using AI analysis. It is not legal, financial, or professional advice. Always conduct your own due diligence before making any purchase.</p>
    </div>
  </div>

  <div class="delivery-card" id="deliveryCard">
    <h3>üì• save your report</h3>
    <div class="delivery-actions">
      <button class="delivery-btn delivery-btn--pdf" id="printReport"><span>üñ®Ô∏è</span> print / save as PDF</button>
      <button class="delivery-btn delivery-btn--email" id="emailBtn"><span>üìß</span> email me a copy</button>
    </div>
    <div class="delivery-email-form" id="emailForm">
      <input type="email" class="delivery-email-input" id="emailInput" placeholder="your email address">
      <button class="delivery-email-send" id="emailSend">send report</button>
      <p class="delivery-email-note">we'll send the report and then delete your email. <a href="/privacy" style="color:var(--emerald-deep);">privacy promise</a></p>
    </div>
  </div>

  <div class="data-warning" id="dataWarning">
    <p><strong>‚ö†Ô∏è once you leave this page, your report and screenshots are permanently deleted.</strong> download or email your report before closing this tab.</p>
  </div>

  <div class="another-report" id="anotherReport"><a href="/">‚Üê analyse another listing</a></div>

  <div class="report-page-footer">
    <a href="/privacy">privacy</a>
    <a href="/terms">terms</a>
    <a href="mailto:help@listinglens.app">contact</a>
  </div>

</div>

<script>
/* ============================================================
   LISTING LENS ‚Äî REPORT PAGE v3.1
   Renders JSON report data. Supports V3.1 format:
   ownerSentiment, grouped questions, checklist.
   Backward-compatible with flat string questions.
   ============================================================ */

function cleanUrl(url) {
  if (!url) return '';
  var m = url.match(/\[([^\]]+)\]\(([^)]+)\)/);
  if (m) return m[2];
  return url.replace(/^\[|\]$/g, '').trim();
}

function formatDate() {
  var d = new Date();
  var m = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  return d.getDate() + ' ' + m[d.getMonth()] + ' ' + d.getFullYear();
}

function animateLoading(cb) {
  var steps = ['step1','step2','step3','step4'], delay = 800, i = 0;
  (function next() {
    if (i > 0) { document.getElementById(steps[i-1]).classList.remove('active'); document.getElementById(steps[i-1]).classList.add('done'); }
    if (i < steps.length) { document.getElementById(steps[i]).classList.add('active'); i++; setTimeout(next, delay + Math.random() * 400); }
    else setTimeout(cb, 300);
  })();
}

function esc(s) { var d = document.createElement('div'); d.textContent = s || ''; return d.innerHTML; }

function renderReport(data) {
  document.getElementById('reportLoading').style.display = 'none';
  document.getElementById('reportCard').style.display = 'block';
  document.getElementById('deliveryCard').style.display = 'block';
  document.getElementById('dataWarning').style.display = 'block';
  document.getElementById('anotherReport').style.display = 'block';

  document.getElementById('reportDate').textContent = formatDate();
  document.getElementById('reportCategory').textContent = data.category || '';
  document.getElementById('reportTitle').textContent = data.title || '';
  var mp = []; if (data.price) mp.push(data.price); if (data.location) mp.push(data.location);
  document.getElementById('reportMeta').textContent = mp.join(' ¬∑ ');
  document.getElementById('reportCatBadge').textContent = (data.category || '').toUpperCase();

  var v = data.verdict;
  document.getElementById('reportVerdict').innerHTML =
    '<div class="report-verdict report-verdict--'+v.level+'">'+
    '<div class="report-verdict-icon">'+esc(v.icon)+'</div>'+
    '<div><strong>'+esc(v.heading)+'</strong><p>'+esc(v.summary)+'</p></div></div>';

  var h = '';
  data.sections.forEach(function(s) {
    h += '<div class="report-section"><h4>'+esc(s.heading)+'</h4>';

    if (s.flags) s.flags.forEach(function(f) {
      h += '<div class="report-flag report-flag--'+f.level+'"><strong>'+esc(f.title)+'</strong><p>'+esc(f.detail)+'</p></div>';
    });

    if (s.ownerSentiment) {
      var o = s.ownerSentiment;
      h += '<div class="report-sentiment">';
      if (o.summary) h += '<div class="report-sentiment-summary">'+esc(o.summary)+'</div>';
      h += '<div class="report-sentiment-columns">';
      if (o.pros && o.pros.length) {
        h += '<div class="report-sentiment-col pros"><h5>What owners love</h5><ul>';
        o.pros.forEach(function(p) { h += '<li>'+esc(p)+'</li>'; });
        h += '</ul></div>';
      }
      if (o.cons && o.cons.length) {
        h += '<div class="report-sentiment-col cons"><h5>Common complaints</h5><ul>';
        o.cons.forEach(function(c) { h += '<li>'+esc(c)+'</li>'; });
        h += '</ul></div>';
      }
      h += '</div></div>';
    }

    if (s.costs) {
      h += '<div class="report-costs">';
      s.costs.forEach(function(c) {
        h += '<div class="report-cost-row'+(c.isTotal?' report-cost-total':'')+'"><span>'+esc(c.label)+'</span><span>'+esc(c.value)+'</span></div>';
      });
      h += '</div>';
    }

    if (s.questions && s.questions.length) {
      if (typeof s.questions[0] === 'object') {
        h += '<div class="report-questions-grid">';
        s.questions.forEach(function(q) {
          h += '<div class="report-question-card"><span class="report-question-category">'+esc(q.category)+'</span><span class="report-question-text">'+esc(q.text)+'</span></div>';
        });
        h += '</div>';
      } else {
        h += '<div class="report-questions">';
        s.questions.forEach(function(q, i) { h += '<div class="report-question">'+(i+1)+'. '+esc(q)+'</div>'; });
        h += '</div>';
      }
    }

    if (s.checklist) {
      h += '<ul class="report-checklist">';
      s.checklist.forEach(function(item, i) {
        h += '<li><div class="report-checkbox" data-check="'+i+'"></div><span>'+esc(item)+'</span></li>';
      });
      h += '</ul>';
    }

    if (s.text) h += '<p class="report-text">'+esc(s.text)+'</p>';

    if (s.sources) {
      h += '<div class="report-sources">';
      s.sources.forEach(function(src) {
        var u = cleanUrl(src.url);
        if (u) h += '<a href="'+esc(u)+'" target="_blank" rel="noopener">'+esc(src.label)+'</a>';
        else h += '<span class="report-source-nolink">'+esc(src.label)+'</span>';
      });
      h += '</div>';
    }

    h += '</div>';
  });
  document.getElementById('reportSections').innerHTML = h;

  document.querySelectorAll('.report-checkbox').forEach(function(b) {
    b.addEventListener('click', function() { this.classList.toggle('checked'); });
  });
}

function showError(msg) {
  document.getElementById('reportLoading').style.display = 'none';
  document.getElementById('reportError').style.display = 'block';
  if (msg) document.getElementById('reportErrorMsg').textContent = msg;
}

document.getElementById('emailBtn').addEventListener('click', function() {
  var f = document.getElementById('emailForm');
  f.style.display = !f.style.display || f.style.display === 'none' ? 'block' : 'none';
  if (f.style.display === 'block') document.getElementById('emailInput').focus();
});

document.getElementById('emailSend').addEventListener('click', function() {
  var e = document.getElementById('emailInput').value.trim();
  if (!e || !e.includes('@')) { document.getElementById('emailInput').style.borderColor = '#DC2626'; return; }
  var b = document.getElementById('emailSend'); b.textContent = 'sending...'; b.disabled = true;
  setTimeout(function() { b.textContent = '‚úì sent!'; b.style.background = '#065F46'; }, 1500);
});

document.getElementById('printReport').addEventListener('click', function() { window.print(); });

/* DEMO DATA ‚Äî V3.1 */
var demoData = {
  vehicle: {
    category: 'vehicle',
    title: '2015 Jeep Wrangler Unlimited Sport Auto 4x4 MY15',
    price: '$22,500',
    location: 'NSW ¬∑ Private seller ¬∑ 156,000 km',
    country: 'Australia',
    verdict: { level: 'red', icon: 'üö®', heading: 'VERDICT: HIGH RISK ‚Äî RECALL STATUS UNVERIFIABLE', summary: 'This Wrangler sits in a model era widely included in Australia\'s Takata airbag recall programs, but the listing withholds the registration plate and VIN, so recall completion cannot be verified. Visible aftermarket modifications raise compliance and insurance questions without documentation.' },
    sections: [
      { heading: 'üö® Critical findings', flags: [
        { level: 'red', title: 'Takata airbag recall ‚Äî cannot confirm completion', detail: 'The 2014-2016 Jeep Wrangler JK is included in the compulsory Takata airbag recall (PRA 2018/16702). The listing hides the registration plate and shows no VIN, so recall status cannot be verified.' },
        { level: 'red', title: 'Multiple additional recalls for this model range', detail: 'Vehicle Recalls Australia shows additional recalls for 2015 JK Wranglers: front impact sensor wire routing, clockspring assembly failure, and transmission oil cooler line leaks (fire risk).' },
        { level: 'red', title: 'Registration plate deliberately hidden', detail: 'Listed as "Check with seller" and blurred in photos. This prevents PPSR verification for finance, write-off, and theft history.' }
      ]},
      { heading: '‚ö†Ô∏è Additional concerns', flags: [
        { level: 'amber', title: 'Aftermarket modifications ‚Äî compliance proof needed', detail: 'Photos show bull bar, auxiliary lights, aftermarket wheels with oversized tyres, and possible suspension lift. In NSW, certain combinations require VASS engineering certification.' },
        { level: 'amber', title: '"Death wobble" risk at this mileage', detail: 'JK Wranglers commonly develop steering oscillation from worn track bar bushings, ball joints, or steering dampers. At 156,000 km with a possible lift, this is high-probability.' },
        { level: 'amber', title: 'Pentastar 3.6L oil cooler housing leaks', detail: 'Prone to cracks in the plastic oil filter/cooler housing at this age. Repair approximately $800-$1,200 if not already replaced.' }
      ]},
      { heading: '‚úÖ Positive findings', flags: [
        { level: 'green', title: 'Price broadly in-market', detail: 'At $22,500, this sits within the typical private-sale range for a 2015 Unlimited Sport with 156,000 km in NSW.' },
        { level: 'green', title: 'Registration current to February 2026', detail: 'Reduces immediate renewal cost. Confirm exact expiry and whether it will still be registered at collection.' },
        { level: 'green', title: 'Seller ID verified on platform', detail: 'CarSales "ID verified" badge present. Better than anonymous but not a substitute for PPSR checks.' }
      ]},
      { heading: 'üë• What owners say', ownerSentiment: {
        summary: 'JK Wrangler Unlimited 3.6L owners love the off-road ability and lifestyle factor, but commonly report trade-offs in comfort, fuel economy, and front-end wear.',
        pros: ['Genuinely capable off-road with massive aftermarket support', 'Removable roof and doors ‚Äî an experience no other SUV offers', 'Pentastar 3.6L more reliable than earlier Wrangler engines when maintained', '4-door Unlimited holds better resale than the 2-door'],
        cons: ['Real-world fuel of 13-15 L/100km, worse with bigger tyres or lifts', 'Highway noise and ride comfort noticeably worse than comparable SUVs', 'Front-end steering/suspension components wear frequently at higher km', 'Interior fit, finish, and water sealing a consistent frustration']
      }},
      { heading: 'üí∞ Hidden costs (NSW estimate)', costs: [
        { label: 'Stamp duty (approx ‚Äî use Service NSW calculator)', value: '~$675' },
        { label: 'PPSR search', value: '$2' },
        { label: '4x4 specialist pre-purchase inspection', value: '~$350-$600' },
        { label: 'Registration renewal', value: '~$450' },
        { label: 'CTP green slip', value: '~$500-$900' },
        { label: 'Comprehensive insurance', value: '~$1,200-$2,500' },
        { label: 'Fuel (15,000 km √ó 11.7 L/100km √ó $2.00/L)', value: '~$3,510' },
        { label: 'Servicing allowance', value: '~$800-$2,000' },
        { label: 'Estimated first-year costs beyond purchase price', value: '$7,000 - $10,500', isTotal: true }
      ]},
      { heading: '‚ùì Questions to ask the seller', questions: [
        { category: 'Registration & Identity', text: 'What is the VIN and registration plate? I need these for PPSR and recall checks before inspecting.' },
        { category: 'Safety Recalls', text: 'Has the Takata airbag recall been completed? Can you provide the Jeep dealer completion letter?' },
        { category: 'Additional Recalls', text: 'Have the front impact sensor, clockspring, and transmission cooler line recalls been addressed?' },
        { category: 'Service History', text: 'Can you send photos of the service logbook for the last 3-4 services?' },
        { category: 'Modifications', text: 'Please list every mod. Do you have VASS engineering certification for the lift and oversized tyres?' },
        { category: 'Insurance', text: 'Are all modifications disclosed to your insurer? Can you confirm coverage in writing?' },
        { category: 'Known Issues', text: 'Any "death wobble" symptoms? Has the oil cooler housing been replaced? Current leaks or noises?' },
        { category: 'Evidence Requests', text: 'Can you send a cold-start video (60 seconds idle) and clear underbody photos?' },
        { category: 'Usage', text: 'Heavy off-road, beach driving, or towing use? Any underbody rust or salt damage?' },
        { category: 'Accident History', text: 'Any accidents, paint repairs, or panel replacements? Receipts please.' },
        { category: 'Roadworthy', text: 'Is the roadworthy already completed? If not, who covers rectification costs?' },
        { category: 'Sale Context', text: 'How long owned and why selling? How many keys included?' }
      ]},
      { heading: '‚úÖ Pre-purchase checklist', checklist: [
        'Request VIN and registration plate before travelling to inspect',
        'Run PPSR ($2 at ppsr.gov.au) for finance, write-off, and stolen status',
        'Check Takata recall at ismyairbagsafe.com.au',
        'Check all recalls at vehiclerecalls.gov.au using VIN',
        'Book 4x4 specialist inspection ‚Äî request valve train, oil cooler, steering/suspension focus',
        'Cold-start the engine and listen for ticking or knocking',
        'Test drive on rough road at 60-90 km/h for steering shake',
        'Inspect tyres for uneven wear and confirm sizes match any engineering cert',
        'Test all electrics: AC, windows, locks, all lights',
        'Get seller\'s key claims in writing before any payment'
      ]},
      { heading: '‚öñÔ∏è Your rights (Australia/NSW)', text: 'In a private sale, the Australian Consumer Law (ACL) provides limited protections compared to buying from a business. The goods must match their description and the seller must have the legal right to sell. However, consumer guarantees regarding acceptable quality and fitness for purpose generally do not apply to private sales in the same way they apply to business sales. Your primary protections come from your own due diligence ‚Äî PPSR checks, independent inspections, and getting the seller\'s key claims in writing before payment.' },
      { heading: 'üîó Sources used in this report', sources: [
        { label: 'ACCC Product Safety ‚Äî Jeep Wrangler JK Takata recall', url: 'https://www.productsafety.gov.au/recalls/fca-australia-pty-ltd-jeep-wrangler-jk-my2014-2016' },
        { label: 'Vehicle Recalls Australia ‚Äî search by make/model/VIN', url: 'https://www.vehiclerecalls.gov.au' },
        { label: 'Is My Airbag Safe ‚Äî Takata check by rego/VIN', url: 'https://www.ismyairbagsafe.com.au' },
        { label: 'PPSR ‚Äî finance, write-off, stolen ($2)', url: 'https://www.ppsr.gov.au' },
        { label: 'Service NSW ‚Äî stamp duty and rego transfer', url: 'https://www.service.nsw.gov.au' },
        { label: 'ACCC consumer rights', url: 'https://www.accc.gov.au/consumers' }
      ]}
    ]
  }
};

(function() {
  var p = new URLSearchParams(window.location.search), demo = p.get('demo');
  if (demo && demoData[demo]) { animateLoading(function() { renderReport(demoData[demo]); }); return; }
  var rj = sessionStorage.getItem('listinglens_report');
  if (rj) { try { var d = JSON.parse(rj); animateLoading(function() { renderReport(d); }); sessionStorage.removeItem('listinglens_report'); } catch(e) { showError('We received your report but couldn\'t display it. Please contact us.'); } return; }
  var sess = p.get('session');
  if (sess) { showError('Report generation is not yet connected.'); return; }
  window.location.href = '/';
})();
</script>
</body>
</html>
